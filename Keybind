local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/HydraScripts/free/refs/heads/main/adwaf"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Keybind  Library | Astron " .. Fluent.Version,
    SubTitle = "by Sophia",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl
})

local player = game.Players.LocalPlayer
local playerId = tostring(player.UserId)

local profileFolder = game:GetService("ReplicatedStorage"):FindFirstChild("network") and
                      game:GetService("ReplicatedStorage").network:FindFirstChild("Profiles") and
                      game:GetService("ReplicatedStorage").network.Profiles:FindFirstChild(playerId)

if not profileFolder then return end

local bindsFolder = profileFolder:FindFirstChild("binds")
if not bindsFolder then return end

for _, category in pairs(bindsFolder:GetChildren()) do
    if category:IsA("Folder") then
        local categoryTab = Window:AddTab({ Title = category.Name, Icon = "" })

        for _, bind in pairs(category:GetChildren()) do
            if bind:IsA("StringValue") then
                local Keybind = categoryTab:AddKeybind("Keybind_" .. bind.Name, {
                    Title = bind.Name,
                    Mode = "Toggle",
                    Default = bind.Value
                })

                Keybind:OnClick(function()
                    print("Keybind clicked:", Keybind:GetState())
                end)

                Keybind:OnChanged(function()
                    print("Keybind changed:", Keybind.Value)
                    bind.Value = Keybind.Value
                end)

                task.spawn(function()
                    while true do
                        wait(1)
                        local state = Keybind:GetState()
                        if state then
                            print("Keybinds is being held down")
                        end
                        if Fluent.Unloaded then break end
                    end
                end)

                Keybind:SetValue(bind.Value, "Toggle")
            end
        end
    end
end

SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})

InterfaceManager:SetFolder("FluentScriptHub")
SaveManager:SetFolder("FluentScriptHub/specific-game")

InterfaceManager:BuildInterfaceSection(Window:AddTab({ Title = "Theme", Icon = "palette" }))
SaveManager:BuildConfigSection(Window:AddTab({ Title = "Config", Icon = "folder-dot" }))

Window:SelectTab(1)

Fluent:Notify({
    Title = "Astron Bot ",
    Content = "The Script Has Been SuccessFully Loaded.",
    Duration = 8
})

SaveManager:LoadAutoloadConfig()
